name: SP28038
clockTree: SP28038
core: ARM Cortex-M4
frequency: 140
io: 100
series: SP28038
line: SP28038
vendor: StarPower
vendorUrl:
  en: https://www.powersemi.cc/EN/
  zh-cn: https://www.powersemi.cc/
documents:
  datasheet:
    SP28038数据手册:
      url:
        en: 
        zh-cn: 
      type: pdf
      size: 0MB
      version: "1.0"
hals: [csp_hal_sp28038]
hasPowerPad: false
illustrate:
  en: |
    The **SP28038** series MCU is based on the **32-bit Arm® Cortex®-M4 core**,
    with a maximum operating frequency of **140 MHz** and built-in **FPU (Floating Point Unit)**
    for efficient arithmetic operations.

    ### Key Features
    - **High-performance core**: 32-bit Arm® Cortex®-M4, up to 140 MHz
    - **Hardware acceleration**: Supports **FPU** for floating-point calculations
    - **Enhanced peripherals**:
      - **EMMC controller** for external memory expansion
      - **MCAN** can be used simultaneously
    - **On-chip resources**: Integrated memory, timers, ADC/DAC
    - **System advantages**: Low power consumption, large capacity, portability,
      and fast Flash erase/program speed

    ### Certifications
    - **IEC 61508 SIL2** functional safety certified (China)
    - Meets **industrial-grade reliability standards**

    ### Application Scenarios
    - Model aircraft
    - Handheld gimbals
    - Barcode scanners
    - Alarms and smart locks
    - Electronic scales
    - Industrial and IoT devices requiring performance and reliability

    ---

    With its **high performance and reliability**, the SP28038 series MCU
    is an ideal choice for industrial control, consumer electronics, and IoT applications.

  zh-cn: |
    **SP28038** 系列 MCU 基于 **32 位 Arm® Cortex®-M4 内核**，最高工作主频可达 **140 MHz**，并内置 **FPU 浮点运算单元**，在性能与能效之间实现良好平衡。

    ### 主要特性
    - **高性能内核**：32 位 Arm® Cortex®-M4，主频 140 MHz
    - **硬件加速**：支持 **FPU 浮点运算单元**
    - **增强型外设**：
      - **EPWM 控制器**，用于PWM输出
      - **EMMC 控制器**，便于外部存储扩展
      - ** CAN 接口 ** 可同时使用
    - **片上资源丰富**：集成存储器、定时器、ADC/DAC
    - **优秀的系统特性**：功耗低、容量大、可移植性好、Flash 擦除/编程速度快

    ### 认证与标准
    - 已通过 **中国 IEC 61508 SIL2 功能安全认证**
    - 符合 **工业级高可靠性标准**

    ### 典型应用领域
    - 航模飞机
    - 手持云台
    - 扫码枪
    - 报警器、密码锁
    - 电子秤
    - 其他工业与消费类应用

    ---

    凭借其 **高性能与高可靠性**，**SP28038 系列 MCU** 是工业控制、消费电子和物联网应用的理想选择。
introduction:
  en: "A mainstream Arm Cortex-M4 value-line MCU featuring a 140 MHz CPU and 256 KB Flash"
  zh-cn: 具有 256 KB Flash 和 140MHz CPU 的主流 Arm Cortex-M4 超值系列 MCU
modules:
  peripherals:
    CPU:
      children:
        Cortex-M4: {}
        NVIC: {}
    System:
      children:
        SYS:
          define: sp28038_sys
        DMA: {}
        XBAR: {}
        GPIO:
          define: sp28038_gpio
        WWDT: 
          define: sp28038_wwdt
        RCM:
          define: sp28038_rcm
    Analog:
      children:
        ADCC0: {}
        ADCC1: {}
        ADCC2: {}
        ADCC3: {}
        ADCC4: {}
        ADCC5: {}
        ADCC6: {}
        ADCC8: {}
        ADCC9: {}
        ADCC10: {}
        ADCC11: {}
        ADCC12: {}
        ADCC13: {}
        ADCC14: {}
    Timers:
      children:
        RTC: {}
        TMR1: {}
        TMR2: {}
        TMR3: {}
        TMR4: {}
        TMR5: {}
        TMR6: {}
        TMR7: {}
        TMR8: {}
    Connectivity:
      children:
        CAN: {}
        EMMC: {}
        I2C1: {}
        I2C2: {}
        SDIO: {}
        SPI1: {}
        SPI2: {}
        SPI3: {}
        USART1:
          define: sp28038_usart
        USART2:
          define: sp28038_usart
        USART3:
          define: sp28038_usart
        UART4:
          define: sp28038_uart
        UART5:
          define: sp28038_uart
        USBD: {}
    Multimedia:
      children:
        I2S2: {}
        I2S3: {}
    Computing:
      children:
        CRC:
          define: sp28038_crc
  middlewares: {}
package: LQFP100
url:
  en: https://global.geehy.com/product/fifth/APM32F103
  zh-cn: https://geehy.com/product/fifth/APM32F103
builders:
  XMake:
    v2.8.1: [gcc-arm-none-eabi]
  CMake:
    v3.7: [gcc-arm-none-eabi]
  MDK-Arm:
    v5.27: [default]
linker:
  defaultHeapSize: "0x200"
  defaultStackSize: "0x400"
pins:
  PA22:
    position: 1
    type: I/O
    signals:
      - EPWM:1A
      - LPTIM:3
      - GPIO:0
  PB0:
    position: 2
    type: I/O
    signals:
      - EPWM:1B
      - LPTIM:2
      - OUTPUTXBAR:1
      - GPIO:1
  PB1:
    position: 3
    type: I/O
    signals:
      - FSMC:A20
      - SYS:TRACED1
      - GPIO:2
  PA23:
    position: 4
    type: I/O
    signals:
      - FSMC:A21
      - SYS:TRACED2
      - GPIO:3
  PB10:
    position: 5
    type: I/O
    signals:
      - FSMC:A22
      - SYS:TRACED3
      - GPIO:4
  PB11:
    position: 6
    type: I/O
    signals:
      - GPIO:5

  VDD0:
    position: 7
    type: I/O
    signals:
      - RTC:OUT
      - RTC:TAMPER
      - GPIO:6
  VSS50_ANA1:
    position: 8
    type: I/O
    signals:
      - RCM:OSC32-IN
      - GPIO:7
  GND1:
    position: 9
    type: I/O
    signals:
      - ADC1:EXTI15
      - ADC2:EXTI15
      - RCM:OSC32-OUT
      - GPIO:8
  XRS:
    position: 10
    type: I/O
    signals:
      - FSMC:A0
      - GPIO:9
  PB13:
    position: 11
    type: I/O
    signals:
      - FSMC:A1
      - GPIO:10
  ADCINA7:
    position: 12
    type: I/O
    signals:
      - FSMC:A2
      - GPIO:11
  PB14:
    position: 13
    type: I/O
    signals:
      - FSMC:A3
      - GPIO:12
  PB15:
    position: 14
    type: I/O
    signals:
      - FSMC:A4
      - GPIO:13
  PB16:
    position: 15
    type: I/O
    signals:
      - FSMC:A5
      - GPIO:14
  PB17:
    position: 16
    type: I/O
    signals:
      - FSMC:A5
      - GPIO:15

  PB18:
    position: 17
    type: I/O
    signals:
      - FSMC:A5
      - GPIO:16

  PB19:
    position: 18
    type: I/O
    signals:
      - ADC3:IN4
      - FSMC:NIORD
      - GPIO:17
  PB20:
    position: 19
    type: I/O
    signals:
      - ADC3:IN5
      - FSMC:NREG
      - GPIO:18
  ADC_VREFP:
    position: 20
    type: I/O
    signals:
      - ADC3:IN6
      - FSMC:NIOWR
      - GPIO:19
  VDDA:
    position: 21
    type: I/O
    signals:
      - ADC3:IN7
      - DAC:EXTI9
      - FSMC:CD
      - GPIO:20
  VSSA:
    position: 22
    type: I/O
    signals:
      - ADC3:IN8
      - FSMC:INTR
      - GPIO:21
  ADC_VREFN:
    position: 23
    type: I/O
    signals:
      - RCM:OSC-IN
      - GPIO:22
  PB27:
    position: 24
    type: I/O
    signals:
      - RCM:OSC-OUT
      - GPIO:23
  PB26:
    position: 25
    type: I/O
    signals:
      - GPIO:24
  PB25:
    position: 26
    type: I/O
    signals:
      - ADC1:IN10
      - ADC2:IN10
      - ADC3:IN10
      - GPIO:25
  PB24:
    position: 27
    type: I/O
    signals:
      - ADC1:IN11
      - ADC2:IN11
      - ADC3:IN11
      - GPIO:26
  PB23:
    position: 28
    type: I/O
    signals:
      - ADC1:IN12
      - ADC2:IN12
      - ADC3:IN12
      - GPIO:27
  PB22:
    position: 29
    type: I/O
    signals:
      - ADC1:IN13
      - ADC2:IN13
      - ADC3:IN13
      - GPIO:28
  PB21:
    position: 30
    type: I/O
    signals:
      - GPIO:29
  ADCINB7:
    position: 31
    type: I/O
    signals:
      - GPIO:30
  VREF0P8TEST:
    position: 32
    type: I/O
    signals:
      - GPIO:31
  PA27:
    position: 33
    type: I/O
    signals:
      - GPIO:32
  PA31:
    position: 34
    type: I/O
    signals:
      - ADC1:IN0
      - ADC2:IN0
      - ADC3:IN0
      - SYS:WKUP
      - TMR2:CH1
      - TMR2:ETR
      - TMR5:CH1
      - TMR8:ETR
      - USART2:CTS
      - GPIO:33
  PA30:
    position: 35
    type: I/O
    signals:
      - ADC1:IN1
      - ADC2:IN1
      - ADC3:IN1
      - TMR2:CH2
      - TMR5:CH2
      - USART2:RTS
      - GPIO:34
  PA29:
    position: 36
    type: I/O
    signals:
      - ADC1:IN2
      - ADC2:IN2
      - ADC3:IN2
      - TMR2:CH3
      - TMR5:CH3
      - USART2:TX
      - GPIO:35
  GND2:
    position: 37
    type: I/O
    signals:
      - ADC1:IN3
      - ADC2:IN3
      - ADC3:IN3
      - TMR2:CH4
      - TMR5:CH4
      - USART2:RX
      - GPIO:36
  VDDIO1:
    position: 38
    type: I/O
    signals:
      - GPIO:37
  PA26:
    position: 39
    type: I/O
    signals:
      - GPIO:38
  PA9:
    position: 40
    type: I/O
    signals:
      - ADC1:IN4
      - ADC2:IN4
      - DAC:OUT1
      - SPI1:NSS
      - USART2:CK
      - GPIO:39
  PA28:
    position: 41
    type: I/O
    signals:
      - ADC1:IN5
      - ADC2:IN5
      - DAC:OUT2
      - SPI1:SCK
      - GPIO:40
  CP_EXT_TEST:
    position: 42
    type: I/O
    signals:
      - ADC1:IN6
      - ADC2:IN6
      - SPI1:MISO
      - TMR1:BKIN
      - TMR3:CH1
      - TMR8:BKIN
      - GPIO:41
  PA18:
    position: 43
    type: I/O
    signals:
      - ADC1:IN7
      - ADC2:IN7
      - SPI1:MOSI
      - TMR1:CH1N
      - TMR3:CH2
      - TMR8:CH1N
      - GPIO:42
  PA17:
    position: 44
    type: I/O
    signals:
      - ADC1:IN14
      - ADC2:IN14
      - GPIO:43
  PA8:
    position: 45
    type: I/O
    signals:
      - ADC1:IN15
      - ADC2:IN15
      - GPIO:44
  PA25:
    position: 46
    type: I/O
    signals:
      - ADC1:IN8
      - ADC2:IN8
      - TMR1:CH2N
      - TMR3:CH3
      - TMR8:CH2N
      - GPIO:45
  PB12:
    position: 47
    type: I/O
    signals:
      - ADC1:IN9
      - ADC2:IN9
      - TMR1:CH3N
      - TMR3:CH4
      - TMR8:CH3N
      - GPIO:46
  PA16:
    position: 48
    type: I/O
    modes:
      - GPIO:47
  PA12:
    position: 49
    type: I/O
    signals:
      - ADC1:EXTI11
      - ADC2:EXTI11
      - FSMC:NIOS16
      - GPIO:48
  PB9:
    position: 50
    type: I/O
    signals:
      - FSMC:A6
      - GPIO:49
  FLASH_VPP:
    position: 51
    type: I/O
    signals:
      - GPIO:50
  PA7:
    position: 52
    type: I/O
    signals:
      - GPIO:51
  PA6:
    position: 53
    type: I/O
    signals:
      - FSMC:A7
      - GPIO:52
  XOSC16M_OUT:
    position: 54
    type: I/O
    signals:
      - FSMC:A8
      - GPIO:53
  XOSC16M_IN:
    position: 55
    type: I/O
    signals:
      - ADC1:EXTI15
      - ADC2:EXTI15
      - FSMC:A9
      - GPIO:54
  VSS50_ANA2:
    position: 56
    type: I/O
    signals:
      - FSMC:A10
      - GPIO:55
  GND3:
    position: 57
    type: I/O
    signals:
      - FSMC:A11
      - GPIO:56
  VDD1:
    position: 58
    type: I/O
    signals:
      - FSMC:D4
      - FSMC:DA4
      - TMR1:ETR
      - GPIO:57
  PA19:
    position: 59
    type: I/O
    signals:
      - FSMC:D5
      - FSMC:DA5
      - TMR1:CH1N
      - GPIO:58
  PB7:
    position: 60
    type: I/O
    signals:
      - DAC:EXTI9
      - FSMC:D6
      - FSMC:DA6
      - TMR1:CH1
      - GPIO:59
  VSS50_ANA3:
    position: 61
    type: I/O
    signals:
      - FSMC:A12
      - GPIO:60
  PB6:
    position: 62
    type: I/O
    signals:
      - FSMC:A13
      - GPIO:61
  PB5:
    position: 63
    type: I/O
    signals:
      - FSMC:D7
      - FSMC:DA7
      - TMR1:CH2N
      - GPIO:62
  PB3:
    position: 64
    type: I/O
    signals:
      - ADC1:EXTI11
      - ADC2:EXTI11
      - FSMC:D8
      - FSMC:DA8
      - TMR1:CH2
      - GPIO:63
  PB4:
    position: 65
    type: I/O
    signals:
      - FSMC:D9
      - FSMC:DA9
      - TMR1:CH3N
      - GPIO:64
  VSS50_ANA4:
    position: 66
    type: I/O
    signals:
      - FSMC:D10
      - FSMC:DA10
      - TMR1:CH3
      - GPIO:65
  VSS50_ANA5:
    position: 67
    type: I/O
    signals:
      - FSMC:D11
      - FSMC:DA11
      - TMR1:CH4
      - GPIO:66
  MPW_EXT_TEST:
    position: 68
    type: I/O
    signals:
      - ADC1:EXTI15
      - ADC2:EXTI15
      - FSMC:D12
      - FSMC:DA12
      - TMR1:BKIN
      - GPIO:67
  PB30:
    position: 69
    type: I/O
    signals:
      - I2C2:SCL
      - TMR2:CH3
      - USART3:TX
      - GPIO:68
  PB29:
    position: 70
    type: I/O
    signals:
      - ADC1:EXTI11
      - ADC2:EXTI11
      - I2C2:SDA
      - TMR2:CH4
      - USART3:RX
      - GPIO:69
  PA11:
    position: 71
    type: I/O
    signals:
      - GPIO:70
  PA5:
    position: 72
    type: I/O
    signals:
      - GPIO:71
  PA4:
    position: 73
    type: I/O
    signals:
      - I2C2:SMBA
      - I2S2:WS
      - SPI2:NSS
      - TMR1:BKIN
      - USART3:CK
      - GPIO:72
  PB8:
    position: 74
    type: I/O
    signals:
      - I2S2:CK
      - SPI2:SCK
      - TMR1:CH1N
      - USART3:CTS
      - GPIO:73
  PA10:
    position: 75
    type: I/O
    signals:
      - SPI2:MISO
      - TMR1:CH2N
      - USART3:RTS
      - GPIO:74
  PA3:
    position: 76
    type: I/O
    signals:
      - ADC1:EXTI15
      - ADC2:EXTI15
      - I2S2:SD
      - SPI2:MOSI
      - TMR1:CH3N
      - GPIO:75
  PA2:
    position: 77
    type: I/O
    signals:
      - FSMC:D13
      - FSMC:DA13
      - USART3:TX
      - GPIO:76
  PA1:
    position: 78
    type: I/O
    signals:
      - DAC:EXTI9
      - FSMC:D14
      - FSMC:DA14
      - USART3:RX
      - GPIO:77
  PA0:
    position: 79
    type: I/O
    signals:
      - FSMC:D15
      - FSMC:DA15
      - USART3:CK
      - GPIO:78
  VDD50_ANA:
    position: 80
    type: I/O
    signals:
      - ADC1:EXTI11
      - ADC2:EXTI11
      - FSMC:A16
      - FSMC:CLE
      - USART3:CTS
      - GPIO:79
  VDDIO2:
    position: 81
    type: I/O
    signals:
      - FSMC:A17
      - FSMC:ALE
      - TMR4:CH1
      - USART3:RTS
      - GPIO:80
  GND4:
    position: 82
    type: I/O
    signals:
      - FSMC:A18
      - TMR4:CH2
      - GPIO:81
  VDD2:
    position: 83
    type: I/O
    signals:
      - GPIO:82
  PB28:
    position: 84
    type: I/O
    signals:
      - GPIO:83
  PB2:
    position: 85
    type: I/O
    signals:
      - FSMC:D0
      - FSMC:DA0
      - TMR4:CH3
      - GPIO:84
  PA15:
    position: 86
    type: I/O
    signals:
      - ADC1:EXTI15
      - ADC2:EXTI15
      - FSMC:D1
      - FSMC:DA1
      - TMR4:CH4
      - GPIO:85
  PA13:
    position: 87
    type: I/O
    signals:
      - FSMC:A12
      - GPIO:86
  PA14:
    position: 88
    type: I/O
    signals:
      - FSMC:A13
      - GPIO:87
  PA20:
    position: 89
    type: I/O
    signals:
      - FSMC:A14
      - GPIO:88
  PA21:
    position: 90
    type: I/O
    signals:
      - FSMC:A15
      - GPIO:89
  PA24:
    position: 91
    type: I/O
    signals:
      - FSMC:INT2
      - GPIO:90
